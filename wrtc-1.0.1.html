<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>WebRTC sample</title>
		<style>
			.localVideo {
				border-radius: 20px 20px 20px 20px;
				transform: scaleX(-1);
				width: 160px;
				height: 120px;
				border: solid 1px black;
			}
			.remoteVideo {
				width: 240px;
				height: 180px;
			}
			.remoteHostVideo {
				width: 320px;
				height: 240px;
				border: ridge 3px red !important;
			}
		</style>
	</head>
	<body>
		<p>
			room name:&nbsp;<input type="text" id="room_name" style="width:100px;" value="" />
			&nbsp;
			room password:&nbsp;<input type="text" id="room_password" style="width:100px;" value="" />
			<br />
			user name:&nbsp;<input type="text" id="user_name" style="width:200px;" value="" />
			<input type="checkbox" id="host">host</input>
			&nbsp;
			<button type="button" onclick="enterRoom();">enter room</button>
			<button type="button" onclick="exitRoom();">exit room</button>
			<br />
			users:<br />
			<textarea id="room_view" rows="4" style="width:100%" readonly="readonly"></textarea>
			<script>
				let textRoomView = document.getElementById('room_view');
				
				addEventListener('update_users_info',　function(event) {
					let users = event.detail;
					textRoomView.value = '';
					for (let id in users) {
						textRoomView.value += 'entered { socketId: ' + id
							+ ', userName: ' + users[id].user
							+ ', self: ' + ((users[id].self) ? 'yes':'no')
							+ ', host: ' + ((users[id].host) ? 'yes':'no')
							+ ', uuid: ' + users[id].uuid
							+ ' }\n';
					}
				});
				
				addEventListener('alert',　function(event) {
					alert('type: ' + event.detail.type + '\n' +
						  'message: ' + event.detail.message);
				});
			</script>
		</p>
		<hr />
		<p>
			<input type="checkbox" id="use_video" checked="1">Video</input>
			<input type="checkbox" id="use_audio" checked="1">Audio</input>
<!--		<input type="hidden" id="use_video" checked="1" />	-->
<!--		<input type="hidden" id="use_audio" checked="1" />	-->
			<button type="button" onclick="startMedia();">Start Media</button>
			<button type="button" onclick="stopMedia();">Stop Media</button>
			&nbsp;
			<button type="button" onclick="connect();">Connect</button>
			<button type="button" onclick="hangUp();">Hang Up</button>
		</p>
		<hr>
		<div>
			<video id="local_video" autoplay muted playsinline class="localVideo" oncontextmenu="return false;"></video>
		</div>
		<div id="container"></div>
		<script src="https://lab.groov-in.com:3001/socket.io/socket.io.js"></script>
		<script src="https://lab.groov-in.com/WebRTC/wrtc-1.0.1.js"></script>
	</body>
</html>
